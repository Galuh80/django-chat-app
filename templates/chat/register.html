{% extends 'chat/index.html' %}
{% block form %}
    <form id="register-form" class="form-group" method="post">
        <div class="card-content">
            <span class="card-title">Register credentials</span>
                <div class="row">
                    {% csrf_token %}
                    <div class="input-field col s12">
                        <label for="username">Username</label>
                        <input type="text" class="validate" name="username" id="username" />
                    </div>
                    <div class="input-field col s12">
                        <label for="password">Password </label>
                        <input type="password" class="validate" name="password" id="password" />
                    </div>
                    <div class="input-field col s12">
                        <label for="password2">Repeat Password</label>
                        <input type="password" class="validate" name="password2"  id="password2">
                    </div>
                </div>
        </div>
        <div class="card-action right-align">
            <div class="col s12">
                <div class="center">
                    <button class="btn green waves-effect waves-light pull-s12">Register</button>
                </div>
            </div><br><br>
        </div>
    </form>
    <script>
    $(function () {
        $('#register-form').on('submit', function (event) {
            event.preventDefault();
            var username = $('#username').val();
            if(username !== '')
            {
                var password = $('#password').val();
                if(password !== '' && password === $('#password2').val()){
                    register(username, password);
                }
                else{
                    alert("The passwords doesn't match!");
                }
            }
            else
                alert("Please enter a valid username!");
        })
    })
    </script>
{% endblock %}